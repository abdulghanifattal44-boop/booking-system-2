# Бизнес‑правила

## 1) Доступ и аутентификация
1. Гость может просматривать:
   - организации
   - филиалы
   - ресурсы
   - доступные даты и слоты
2. Создание бронирования требует аутентификации:
   - Register/Login показывается **только на шаге подтверждения бронирования**.
3. Админ‑функции доступны только роли **Admin**.

## 2) Пользователи и роли
1. У пользователя уникальный email.
2. Роли:
   - **User**: создаёт/просматривает/отменяет свои бронирования
   - **Admin**: управляет мастер‑данными и всеми бронированиями
3. Защищённые endpoints требуют JWT.

## 3) Организации / филиалы / ресурсы
- Organization → много Branches → много Resources.
- Неактивные ресурсы скрываются от клиента (опционально).

## 4) Слоты
1. Слот создаётся для конкретного ресурса и времени (start/end).
2. Состояния: AVAILABLE / RESERVED / BLOCKED (опционально).
3. Генерация слотов: диапазон дат + время + интервал, без дубликатов.

## 5) Бронирования
1. Бронирование связано с Resource + TimeSlot + User.
2. Один слот можно забронировать только один раз.
3. Повторная попытка → **HTTP 409 Conflict** (UI показывает «Слот уже забронирован»).
4. Пример статусов: PENDING / CONFIRMED / CANCELLED / COMPLETED.

## 6) Уведомления (логические)
- Записи в БД о событиях (создание/отмена/смена статуса) + read/unread.

## 7) История
- BookingStatusHistory: кто/когда/from→to.

## 8) Безопасность
- Пароли хешируются (bcrypt).
- CORS разрешает origins Customer и Admin UI.
